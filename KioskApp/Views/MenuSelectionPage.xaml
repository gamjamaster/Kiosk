<Page x:Class="KioskApp.Views.MenuSelectionPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Select Menu"
      Background="{StaticResource BackgroundColor}">
    <Grid Margin="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,30">
            <Button Content="&#x2190; Back" 
                 Style="{StaticResource SecondaryButtonStyle}"
                   Click="BackButton_Click"/>
            <TextBlock x:Name="CategoryTitleText" 
                      FontSize="36" 
                      FontWeight="Bold"
                      Margin="30,0,0,0"
                      VerticalAlignment="Center"/>
        </StackPanel>
        
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="MenuItemsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Style="{StaticResource MenuItemButtonStyle}"
                               Width="320" 
                               Height="350"
                               Click="MenuItemButton_Click"
                               Tag="{Binding}">
                            <StackPanel>
                                <Border Background="{StaticResource SurfaceAltColor}"
                                       Width="280" 
                                       Height="200" 
                                       CornerRadius="8"
                                       Margin="0,0,0,15">
                                    <TextBlock Text="{Binding Name}" 
                                             FontSize="48" 
                                             HorizontalAlignment="Center" 
                                             VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="{Binding Name}" 
                                         FontSize="22" 
                                         FontWeight="Bold"
                                         TextWrapping="Wrap"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,10"/>
                                <TextBlock Text="{Binding Description}" 
                                         FontSize="14" 
                                         Foreground="{StaticResource MutedTextColor}"
                                         TextWrapping="Wrap"
                                         HorizontalAlignment="Center"
                                         TextAlignment="Center"
                                         MaxWidth="280"
                                         Margin="0,0,0,10"/>
                                <TextBlock FontSize="20" 
                                         FontWeight="Bold"
                                         Foreground="{StaticResource PrimaryColor}"
                                         HorizontalAlignment="Center">
                                    <Run Text="$"/>
                                    <Run Text="{Binding Price, StringFormat=N0}"/>
                                </TextBlock>
                            </StackPanel>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
